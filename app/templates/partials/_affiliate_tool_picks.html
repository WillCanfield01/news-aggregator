{# Affiliate recommendations surfaced below tool output #}
{% if picks and tool_key %}
<div class="affiliate-card mt-6 border border-slate-200 rounded-2xl bg-slate-50 px-4 py-3 text-sm text-slate-800" data-affiliate-card>
  <button
    type="button"
    class="w-full flex items-center justify-between gap-2"
    data-affiliate-toggle="true"
  >
    <span class="font-medium flex items-center gap-2">
      <span class="text-xl">✨</span>
      <span>Improve your setup</span>
    </span>
    <span class="text-xs text-slate-500" data-affiliate-toggle-label="collapsed">
      Show helpful picks
    </span>
  </button>
  <div class="mt-3 space-y-2 hidden" data-affiliate-body="true">
    <p class="text-xs text-slate-500">
      People who use this tool also like:
    </p>
    <ul class="space-y-1">
      {% for item in picks %}
      <li class="flex items-start justify-between gap-3">
        <div>
          <div class="font-medium">{{ item.name }}</div>
          <div class="text-xs text-slate-500">
            {{ item.blurb }}
            {% if item.reviews_hint %}· {{ item.reviews_hint }}{% endif %}
          </div>
        </div>
        <div class="flex flex-col items-end text-right">
          <span class="text-xs text-slate-600">{{ item.approx_price }}</span>
          <a
            href="{{ amazon_url(item.asin) }}"
            target="_blank"
            rel="noopener noreferrer"
            class="mt-1 inline-flex items-center rounded-full border border-blue-500 px-3 py-1 text-xs font-medium text-blue-600 hover:bg-blue-50"
          >
            View on Amazon
          </a>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endif %}
