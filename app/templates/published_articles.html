{% extends "base.html" %}

{% block title %}Daily Cybersecurity Briefings – The Roundup{% endblock %}

{% block head %}
<style>
    .container {
        max-width: 980px;
        margin: 40px auto 0;
        padding: 32px 24px 64px;
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 6px 30px rgba(60, 60, 60, .10);
    }

    h1 {
        font-size: clamp(2rem, 1.4vw + 1.6rem, 2.8rem);
        font-weight: 800;
        color: #14345b;
        margin-bottom: 24px;
        text-align: center;
    }

    .articles-list {
        display: grid;
        grid-template-columns: 1fr;
        gap: 28px;
    }

    @media (min-width: 860px) {
        .articles-list {
            grid-template-columns: 1fr 1fr;
        }
    }

    .article-card {
        background: linear-gradient(180deg, #f7fbff 0%, #f3f6fb 100%);
        border: 1px solid #e8eef7;
        border-radius: 14px;
        padding: 22px 20px 20px;
        box-shadow: 0 2px 14px rgba(0, 0, 0, .06);
        display: flex;
        flex-direction: column;
        gap: 10px;
        transition: transform .12s ease, box-shadow .12s ease;
    }

    .article-card:hover,
    .article-card:focus-within {
        transform: translateY(-2px);
        box-shadow: 0 8px 18px rgba(0, 0, 0, .10);
    }

    .card-top {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 10px;
    }

    .article-title,
    .article-title:visited {
        color: #14345b;
        font-size: 1.25rem;
        font-weight: 800;
        margin: 0;
        text-decoration: none;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        /* clamp long titles */
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .article-title:hover {
        color: #2863fa;
        text-decoration: underline;
    }

    .article-date {
        color: #6e7a8a;
        font-size: .95rem;
    }

    .article-excerpt {
        color: #273142;
        font-size: 1rem;
        line-height: 1.55;
        min-height: 48px;
        overflow-wrap: anywhere;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        /* tidy, uniform cards */
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .article-footer {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
    }

    .plus-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 6px 8px;
        border-radius: 999px;
        background: #eef2ff;
        color: #24346a;
        font-weight: 800;
        font-size: 0.85rem;
    }

    .article-btn,
    .article-btn:visited {
        display: inline-flex;
        align-self: flex-start;
        align-items: center;
        gap: 8px;
        background: #1f57ff;
        color: #fff !important;
        /* kill purple visited color */
        border: none;
        border-radius: 10px;
        padding: 10px 16px;
        font-weight: 700;
        font-size: 1rem;
        text-decoration: none !important;
        /* kill underline */
        transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
    }

    .back-link {
        display: inline-block;
        margin-bottom: 1.5rem;
        color: #1845a3;
        font-weight: 600;
        text-decoration: none;
        font-size: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <a href="/" class="back-link">← Back to Home</a>
    <h1>Daily Cybersecurity Briefings</h1>
    {% set user_is_plus = is_plus or False %}
    <div class="articles-list">
        {% for article in articles %}
        <div class="article-card">
            <div class="card-top">
                <a class="article-title" href="{{ url_for('all_articles.read_article', filename=article.filename) }}">
                    {{ article.title }}
                </a>
                <span class="plus-badge" aria-label="Plus feature">Plus</span>
            </div>

            {% if article.date %}
            <div class="article-date">
                <time datetime="{{ article.date.isoformat() }}">{{ article.date.strftime('%b %d, %Y') }}</time>
            </div>
            {% endif %}

            <div class="article-excerpt">
                {{ article.snippet or article.excerpt }}
            </div>

            <div class="article-footer">
                <a class="article-btn" href="{{ url_for('all_articles.read_article', filename=article.filename) }}"
                    aria-label="{{ 'Read full briefing' if user_is_plus else 'Preview briefing' }}: {{ article.title }}">
                    {{ "Read Full Briefing" if user_is_plus else "Preview briefing" }}
                </a>
            </div>
        </div>

        {% endfor %}
    </div>
</div>
{% endblock %}
