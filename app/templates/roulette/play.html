{% extends "base.html" %}
{% block title %}Timeline Roulette{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='roulette/roulette.css') }}">
{% endblock %}
{% block content %}
<section class="roulette-wrap">
    <a href="{{ url_for('landing') }}" class="roulette-back">← Back to Homepage</a>

    <div class="roulette-header">
        <div class="meta-row">
            <div class="pill">Timeline Roulette</div>
            <div class="pill" id="sessionScore">Score: 0/0</div>
            <a class="pill link" href="/roulette/leaderboard">Leaderboard</a>
        </div>
        <h1 id="prompt">Loading...</h1>
        <p class="roulette-subhead" id="subhead">Pick the real one.</p>
        <p class="roulette-date" id="dateNote"></p>
    </div>

    <div id="cardsWrap">
        <div id="cards" class="choice-grid"></div>
    </div>

    <div class="result-row">
        <div id="result" class="result-text" aria-live="polite"></div>
        <a href="#" target="_blank" rel="noopener" id="sourceLink" class="source-link">Read the real event →</a>
    </div>

    <div id="controls" class="controls">
        <button id="nextBtn" class="btn primary" style="display:none;">Next</button>
        <button id="restartBtn" class="btn secondary" style="display:none;">Start over</button>
    </div>
    <div id="roulettePlusCard" data-checkout-url="{{ plus_checkout_url() }}" style="display:none;margin-top:12px;">
        <div style="background:#0f172a;color:#e2e8f0;border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.1);box-shadow:0 12px 30px rgba(0,0,0,0.35);">
            <div id="roulettePlusTitle" style="font-weight:800;margin-bottom:4px;">Want to keep playing?</div>
            <p id="roulettePlusCopy" style="margin:0 0 8px;color:#cbd5e1;">Plus unlocks unlimited plays, streak protection, and past days.</p>
            <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;">
                <a id="roulettePlusCta" href="{{ plus_checkout_url() }}" style="display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:10px;background:#1f57ff;color:#fff;font-weight:800;text-decoration:none;">Unlock Plus · $2.99/mo</a>
                <button id="roulettePlusSecondary" type="button" style="padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.2);background:transparent;color:#cbd5e1;font-weight:700;cursor:pointer;">Come back tomorrow</button>
            </div>
        </div>
    </div>

    <div id="recap" class="recap"></div>
</section>

<script src="{{ url_for('static', filename='roulette/roulette.js') }}"></script>
{% endblock %}
